CREATE TABLE EMSD_CLIENTES(
    COD_CLIENTE NUMBER,
    NOMBRE_CLIENTE VARCHAR2(30),
    APELLIDO1_CLIENTE VARCHAR2(30),
    APELLIDO2_CLIENTE VARCHAR2(30),
    TELEFONO NUMBER,
    COD_COMUNA NUMBER,
    COD_TRABAJADOR NUMBER,
    CONSTRAINT PK_EMSD_CLIENTES PRIMARY KEY(COD_CLIENTE),
    CONSTRAINT FK_EMSD_CLIENTES_COMUNA FOREIGN KEY(COD_COMUNA) REFERENCES EMSD_COMUNA(COD_COMUNA),
    CONSTRAINT FK_EMSD_CLIENTES_TRABAJADORES FOREIGN KEY(COD_TRABAJADOR) REFERENCES EMSD_TRABAJADORES(COD_TRABAJADOR)
);

CREATE OR REPLACE TRIGGER EMSD_CLIENTES
BEFORE INSERT
ON EMSD_CLIENTES
FOR EACH ROW
BEGIN
	
END;

CREATE OR REPLACE PROCEDURE EMSD_CLIENTES_(


)
IS 
BEGIN
	LOCK TABLE EMSD_CLIENTES IN ROW EXCLUSIVE MODE;

	COMMIT;
	EXCEPTION
		WHEN NO_DATA_FOUND THEN
    		RAISE_APPLICATION_ERROR(+100, 'No existe este cliente');
    	WHEN STORAGE_ERROR THEN
            RAISE_APPLICATION_ERROR(-6500, 'Fallo de memoria');
    ROLLBACK;
END;
