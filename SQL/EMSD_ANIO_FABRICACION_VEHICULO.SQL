CREATE TABLE EMSD_ANIO_FABRICACION_VEHICULO(
    COD_ANIO_FABRICACION NUMBER,
    ANIO_FABRICACION NUMBER,
    CONSTRAINT PK_EMSD_ANIO_FABRICACION_VEHICULO PRIMARY KEY(COD_ANIO_FABRICACION)
);

--SECUENCIA TABLA
CREATE SEQUENCE SEQ_EMSD_ANIO_FABRICACION_VEHICULO
START WITH 1
INCREMENT BY 1
CACHE 200
NOCYCLE;


CREATE OR REPLACE TRIGGER EMSD_ANIO_FABRICACION_VEHICULO
BEFORE INSERT 
ON EMSD_ANIO_FABRICACION_VEHICULO
FOR EACH ROW
BEGIN
    :NEW.COD_ANIO_FABRICACION := SEQ_EMSD_ANIO_FABRICACION_VEHICULO.NEXTVAL;
    IF (:NEW.ANIO_FABRICACION IS NULL) THEN
        RAISE_APPLICATION_ERROR(-20001, 'El año de fabricación no puede estar vacío.');
    END IF;
    IF (:NEW.ANIO_FABRICACION < 1000) THEN
        RAISE_APPLICATION_ERROR(-20002, 'El formato del año no corresponde');
    END IF;
END;

